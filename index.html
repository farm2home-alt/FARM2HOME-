<!DOCTYPE html>
<html lang="ml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FARM 2 HOME - All in One</title>
    <link href="https://api.fontshare.com/v2/css?f[]=clash-display@700,600,500&display=swap" rel="stylesheet">

    <style>
        /* --- CSS ‡¥≠‡¥æ‡¥ó‡¥Ç (Style.css ‡¥á‡¥§‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥ö‡µá‡µº‡¥§‡µç‡¥§‡µÅ) --- */
        :root {
            --primary: #2e7d32;
            --secondary: #388e3c;
            --bg: #f4f8f4;
        }
        header { 
    /* ‡¥¨‡¥æ‡¥ï‡µç‡¥ï‡µç‡¥ó‡µç‡¥∞‡µó‡¥£‡µç‡¥ü‡µç ‡¥á‡¥Æ‡µá‡¥ú‡µç ‡¥∏‡µÜ‡¥±‡µç‡¥±‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ */
    background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('bg.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    
    color: #FFC300; 
    text-align: center; 
    padding: 60px 20px; /* ‡¥π‡µà‡¥±‡µç‡¥±‡µç ‡¥Ö‡¥≤‡µç‡¥™‡¥Ç ‡¥ï‡µÇ‡¥ü‡µç‡¥ü‡¥ø */
    border-radius: 0 0 20px 20px; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.2); 
}

    header h1 {
    font-family: 'Clash Display', sans-serif;
    font-weight: 700; /* Extra Bold ‡¥≤‡µÅ‡¥ï‡µç‡¥ï‡¥ø‡¥®‡µç */
    font-size: 3.0rem;
    text-transform: uppercase;
    letter-spacing: -1px; /* ‡¥Ö‡¥ï‡µç‡¥∑‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥Ö‡¥ü‡µÅ‡¥™‡µç‡¥™‡¥ø‡¥ö‡µç‡¥ö‡µÅ ‡¥µ‡µÜ‡¥ï‡µç‡¥ï‡µÅ‡¥Æ‡µç‡¥™‡µã‡µæ ‡¥ï‡µÇ‡¥ü‡µÅ‡¥§‡µΩ ‡¥≤‡µÅ‡¥ï‡µç‡¥ï‡µç ‡¥ï‡¥ø‡¥ü‡µç‡¥ü‡µÅ‡¥Ç */
    color: ¬†white;
    margin: 0;
    text-shadow: 0px 4px 10px rgba(0,0,0,0.25);
}

/* ‡¥∏‡¥¨‡µç ‡¥π‡µÜ‡¥°‡¥ø‡¥Ç‡¥ó‡¥ø‡¥®‡µÅ‡¥Ç ‡¥á‡¥§‡µá ‡¥´‡µã‡¥£‡µç‡¥ü‡µç ‡¥µ‡µá‡¥£‡¥Æ‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ */

    header p {
    font-family: 'Chilanka', cursive;
    font-size: 1.0rem; /* ‡¥Ö‡¥≤‡µç‡¥™‡¥Ç ‡¥µ‡¥≤‡µÅ‡¥§‡¥æ‡¥ï‡µç‡¥ï‡¥ø */
    color: #f0f0f0;


}


        body { font-family: Arial, sans-serif; margin: 0; background-color: var(--bg); color: #333; }
        .page { display: none; padding-bottom: 50px; } /* ‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥™‡µá‡¥ú‡µÅ‡¥Ç ‡¥Ü‡¥¶‡µç‡¥Ø‡¥Ç ‡¥Æ‡¥±‡¥ö‡µç‡¥ö‡µÅ ‡¥µ‡µÜ‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ */
        .active { display: block; animation: fadeIn 0.5s; } /* ‡¥∏‡µÜ‡¥≤‡¥ï‡µç‡¥ü‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥® ‡¥™‡µá‡¥ú‡µç ‡¥Æ‡¥æ‡¥§‡µç‡¥∞‡¥Ç ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ */
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

       
        /* ‡¥ï‡¥æ‡µº‡¥°‡µç ‡¥∏‡µç‡¥±‡µç‡¥±‡µà‡¥≤‡µÅ‡¥ï‡µæ */
        .card { background: white; border: 2px solid var(--primary); border-radius: 15px; padding: 20px; margin-bottom: 20px; text-align: center; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .card:hover { transform: translateY(-5px); background-color: #f1f8e9; }
        .card h3 { margin: 10px 0; color: var(--primary); }
        .card ul { list-style: none; padding: 0; text-align: left; font-size: 0.9em; }
        .card ul li::before { content: "‚úÖ "; }

        /* ‡¥´‡µã‡¥Æ‡µÅ‡¥Ç ‡¥¨‡¥ü‡µç‡¥ü‡¥£‡µÅ‡¥ï‡¥≥‡µÅ‡¥Ç */
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; }
        .btn-main { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 8px; width: 100%; font-weight: bold; cursor: pointer; }
        .btn-orange { background: #ff9800; color: white; border: none; padding: 15px; border-radius: 10px; width: 100%; font-size: 1.1rem; cursor: pointer; margin-top: 15px; }
        .btn-back { background: rgba(255,255,255,0.2); border: 1px solid white; color: white; padding: 5px 15px; border-radius: 5px; cursor: pointer; margin-bottom: 10px; }

        /* ‡¥ó‡µç‡¥∞‡¥ø‡¥°‡µç ‡¥∏‡µç‡¥±‡µç‡¥±‡µà‡µΩ */
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .product-item { background: white; padding: 15px; border-radius: 12px; border: 1px solid #ddd; text-align: center; }
        
        .table-box { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; margin-top: 10px; }
        .table-box th, .table-box td { border: 1px solid #eee; padding: 12px; text-align: center; }
    </style>
</head>
<body>

    <div id="indexPage" class="page active">
        <header>
            <div class="header-container" style="display: flex; flex-direction: column; align-items: center;">
            
            <div class="logo-icon-box" style="width: 80px; height: 80px; border-radius: 50%; overflow: hidden; margin: 0 auto 10px auto; background: white;">
                <img src="logo.png" alt="Logo" style="width: 100%; height: 100%; object-fit: cover;">
            </div>

        </div>
            <h1>FARM 2 HOME</h1>
            <p>‡¥™‡¥ö‡µç‡¥ö‡¥ï‡µç‡¥ï‡¥±‡¥ø‡¥ï‡µæ ‡¥®‡µá‡¥∞‡¥ø‡¥ü‡µç‡¥ü‡µç ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥µ‡µÄ‡¥ü‡µç‡¥ü‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç</p>
            <link href="https://fonts.googleapis.com/css2?family=Chilanka&display=swap" rel="stylesheet">

        </header>
        <div class="container">
            <h2 style="text-align: center; color: var(--primary);">‡¥≤‡µã‡¥ó‡¥ø‡µª ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï</h2>
            <div class="card" onclick="showPage('farmerPage')">
                <div style="font-size: 40px;">üë®‚Äçüåæ</div>
                <h3>‡¥û‡¥æ‡µª ‡¥ï‡µº‡¥∑‡¥ï‡¥®‡¥æ‡¥£‡µç</h3>
                <ul>
                    <li>‡¥µ‡¥ø‡¥™‡¥£‡¥ø ‡¥µ‡¥ø‡¥≤ ‡¥Ö‡¥±‡¥ø‡¥Ø‡¥æ‡¥Ç</li>
                    <li>‡¥™‡µç‡¥≤‡¥æ‡¥®‡µç‡¥±‡µç ‡¥°‡µã‡¥ï‡µç‡¥ü‡µº ‡¥∏‡µç‡¥ï‡¥æ‡¥®‡¥ø‡¥Ç‡¥ó‡µç</li>
                    <li>‡¥µ‡¥ø‡¥≥‡¥ï‡µæ ‡¥≤‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡¥Ç</li>
                </ul>
            </div>
            <div class="card" onclick="showPage('customerPage')">
                <div style="font-size: 40px;">üõí</div>
                <h3>‡¥û‡¥æ‡µª ‡¥â‡¥™‡¥≠‡µã‡¥ï‡µç‡¥§‡¥æ‡¥µ‡¥æ‡¥£‡µç</h3>
                <ul>
                    <li>‡¥®‡¥æ‡¥ü‡µç‡¥ü‡µÅ‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø ‡¥∏‡¥¨‡µç‚Äå‡¥∏‡µç‚Äå‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‚Äå‡¥∑‡µª</li>
                    <li>‡¥´‡µç‡¥∞‡¥∑‡µç ‡¥â‡µΩ‡¥™‡µç‡¥™‡¥®‡µç‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥µ‡¥æ‡¥ô‡µç‡¥ô‡¥æ‡¥Ç</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="farmerPage" class="page">
        <header>
            <button class="btn-back" onclick="showPage('indexPage')">‚¨Ö Back</button>
            <h1>Farmer Zone</h1>
        </header>
        <div class="container">
            <div class="card" style="text-align: left; border: none; cursor: default;">
                <h3>‡¥™‡µÅ‡¥§‡¥ø‡¥Ø ‡¥â‡µΩ‡¥™‡µç‡¥™‡¥®‡µç‡¥®‡¥Ç ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥ï ‚ûï</h3>
                <input type="text" id="pName" placeholder="‡¥µ‡¥ø‡¥≥‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥™‡µá‡¥∞‡µç">
                <input type="text" id="pPrice" placeholder="‡¥µ‡¥ø‡¥≤ (‚Çπ/Kg)">
                <input type="text" id="fName" placeholder="‡¥ï‡µº‡¥∑‡¥ï‡µª‡µç‡¥±‡µÜ ‡¥™‡µá‡¥∞‡µç">
                <button class="btn-main" onclick="uploadData()">‡¥≤‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡¥ø‡µΩ ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥ï</button>
            </div>

            <h3>‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ ‡¥ö‡µá‡µº‡¥§‡µç‡¥§ ‡¥â‡µΩ‡¥™‡µç‡¥™‡¥®‡µç‡¥®‡¥ô‡µç‡¥ô‡µæ üìã</h3>
            <div id="farmerProductDisplay"></div>

            <div class="card" style="background: #e8f5e9; margin-top: 20px;">
                <h3>‡¥™‡µç‡¥≤‡¥æ‡¥®‡µç‡¥±‡µç ‡¥°‡µã‡¥ï‡µç‡¥ü‡µº ü©∫</h3>
                <p>‡¥∞‡µã‡¥ó‡¥ô‡µç‡¥ô‡µæ ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥æ‡µª ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥Ö‡¥Ø‡¥ï‡µç‡¥ï‡µÇ.</p>
                <button class="btn-main" style="background: #25D366;" onclick="window.open('https://wa.me/918089475765?text=Hi,‡¥π‡¥≤‡µã, ‡¥é‡¥®‡µç‡¥±‡µÜ ‡¥ö‡µÜ‡¥ü‡¥ø‡¥ï‡µç‡¥ï‡µç ‡¥í‡¥∞‡µÅ ‡¥Ö‡¥∏‡µÅ‡¥ñ‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÅ. ‡¥á‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥û‡¥æ‡µª ‡¥§‡¥æ‡¥¥‡µÜ ‡¥Ö‡¥Ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ. ‡¥á‡¥§‡µä‡¥®‡µç‡¥®‡µç ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥Æ‡µã?')">WhatsApp Help</button>
            </div>
        </div>
    </div>

    <div id="customerPage" class="page">
        <header>
            <button class="btn-back" onclick="showPage('indexPage')">‚¨Ö Back</button>
            <h1>Customer Zone</h1>
        </header>
        <div class="container">
            <h2 style="text-align: center; color: var(--primary);">‡¥≤‡¥≠‡µç‡¥Ø‡¥Æ‡¥æ‡¥Ø ‡¥â‡µΩ‡¥™‡µç‡¥™‡¥®‡µç‡¥®‡¥ô‡µç‡¥ô‡µæ ü•ó</h2>
            <div id="customerProductList" class="product-grid"></div>
            
            
            <button class="btn-orange" id="boxBtn" onclick="showBoxDetails()">üõí ‡¥é‡¥®‡µç‡¥±‡µÜ ‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø ‡¥ï‡¥æ‡¥£‡µÅ‡¥ï (0)</button>

<div id="boxModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:1000;">
    <div style="background:white; width:85%; max-width:400px; margin:20% auto; padding:20px; border-radius:15px; position:relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
        <span onclick="closeModal()" style="position:absolute; right:15px; top:10px; font-size:28px; cursor:pointer; color:#888;">&times;</span>
        
        <h3 style="color:#2e7d32; text-align:center; margin-top:0;">‡¥é‡¥®‡µç‡¥±‡µÜ ‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø üì¶</h3>
        <hr style="border:0; border-top:1px solid #eee;">
        
        <div id="boxItemsList" style="max-height:200px; overflow-y:auto; margin:15px 0; padding:10px; background:#f9f9f9; border-radius:8px;"></div>
        
        <button class="btn-main" onclick="orderViaWhatsApp()" style="background:#25D366; display:flex; align-items:center; justify-content:center; gap:10px;">
             WhatsApp ‡¥µ‡¥¥‡¥ø ‡¥ì‡µº‡¥°‡µº ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï
        </button>
    </div>
</div>


   
            <div class="card" style="background: #f1f8e9; margin-top: 20px; border-style: dashed;">
    <h3>‡¥¨‡¥æ‡µº‡¥ü‡µç‡¥ü‡µº ‡¥é‡¥ï‡µç‡¥∏‡µç‡¥ö‡µá‡¥û‡µç‡¥ö‡µç ‚ôªÔ∏è</h3>
    <p>‡¥ú‡µà‡¥µ‡¥Æ‡¥æ‡¥≤‡¥ø‡¥®‡µç‡¥Ø‡¥Ç ‡¥®‡µΩ‡¥ï‡¥ø ‡¥™‡¥£‡¥Ç ‡¥≤‡¥æ‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡µÇ (1kg = ‚Çπ5 ‡¥°‡¥ø‡¥∏‡µç‡¥ï‡µó‡¥£‡µç‡¥ü‡µç)</p>
    
    <input type="number" id="wasteAmount" placeholder="‡¥Æ‡¥æ‡¥≤‡¥ø‡¥®‡µç‡¥Ø‡¥§‡µç‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥Ö‡¥≥‡¥µ‡µç (Kg)" oninput="calculateDiscount()">
    
    <p>‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥°‡¥ø‡¥∏‡µç‡¥ï‡µó‡¥£‡µç‡¥ü‡µç ‡¥â‡¥£‡µç‡¥ü‡µç: <strong>‚Çπ<span id="discountDisplay">0.00</span></strong></p>
    
    <button class="btn-main" onclick="applyBarterDiscount()">Apply Discount</button>
</div>

        </div>
    </div>

    <script>
        // ‡¥™‡µá‡¥ú‡µÅ‡¥ï‡µæ ‡¥®‡¥ø‡¥Ø‡¥®‡µç‡¥§‡µç‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            if(pageId === 'customerPage') loadCustomerProducts();
            if(pageId === 'farmerPage') loadFarmerProducts();
        }

        // ‡¥°‡¥æ‡¥±‡µç‡¥± ‡¥∏‡µç‡¥±‡µç‡¥±‡µã‡¥±‡µá‡¥ú‡µç
        let products = JSON.parse(localStorage.getItem('farmerProducts')) || [];
        let myBox = JSON.parse(localStorage.getItem('myBox')) || [];

        // ‡¥ï‡µº‡¥∑‡¥ï‡µª ‡¥∏‡¥æ‡¥ß‡¥®‡¥Ç ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥Æ‡µç‡¥™‡µã‡µæ
        function addFarmerProduct() {
            const name = document.getElementById('pName').value;
            const price = document.getElementById('pPrice').value;
            const farmer = document.getElementById('fName').value;

            if(name && price && farmer) {
                products.push({ id: Date.now(), name, price, farmer });
                localStorage.setItem('farmerProducts', JSON.stringify(products));
                alert("‡¥µ‡¥ø‡¥ú‡¥Ø‡¥ï‡¥∞‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥ö‡µá‡µº‡¥§‡µç‡¥§‡µÅ!");
                document.getElementById('pName').value = '';
                document.getElementById('pPrice').value = '';
                loadFarmerProducts();
            } else {
                alert("‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï");
            }
        }

        // ‡¥ï‡µº‡¥∑‡¥ï‡¥®‡µç‡¥±‡µÜ ‡¥≤‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª
        function loadFarmerProducts() {
            const div = document.getElementById('farmerProductDisplay');
            div.innerHTML = products.length === 0 ? '<p>‡¥í‡¥®‡µç‡¥®‡µÅ‡¥Ç ‡¥ö‡µá‡µº‡¥§‡µç‡¥§‡¥ø‡¥ü‡µç‡¥ü‡¥ø‡¥≤‡µç‡¥≤.</p>' : '';
            products.forEach(p => {
                div.innerHTML += `
                    <div class="card" style="text-align:left; padding:10px; border-width:1px;">
                        <strong>${p.name}</strong> - ‚Çπ${p.price} <br>
                        <small>‡¥ï‡µº‡¥∑‡¥ï‡µª: ${p.farmer}</small>
                        <button onclick="deleteProduct(${p.id})" style="float:right; color:red; border:none; background:none; cursor:pointer;">‡¥í‡¥¥‡¥ø‡¥µ‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥ï</button>
                    </div>`;
            });
        }

        function deleteProduct(id) {
            products = products.filter(p => p.id !== id);
            localStorage.setItem('farmerProducts', JSON.stringify(products));
            loadFarmerProducts();
        }

        // ‡¥ï‡¥∏‡µç‡¥±‡µç‡¥±‡¥Æ‡µº ‡¥≤‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª
        function loadCustomerProducts() {
            const list = document.getElementById('customerProductList');
            list.innerHTML = products.length === 0 ? '<p style="grid-column:1/3">‡¥á‡¥™‡µç‡¥™‡µã‡µæ ‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥í‡¥®‡µç‡¥®‡µÅ‡¥Æ‡¥ø‡¥≤‡µç‡¥≤.</p>' : '';
            
            products.forEach(p => {
                list.innerHTML += `
                    <div class="product-item">
                        <div style="font-size:30px">ü•¶</div>
                        <h4>${p.name}</h4>
                        <p style="color:var(--primary); font-weight:bold;">‚Çπ${p.price}</p>
                        <button class="btn-main" style="padding:5px; font-size:12px;" onclick="addToBox('${p.name}')">üì¶ ‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø‡¥Ø‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç</button>
                    </div>`;
            });
            updateBoxCount();
        }

        function addToBox(name) {
            myBox.push(name);
            localStorage.setItem('myBox', JSON.stringify(myBox));
            updateBoxCount();
            alert(name + " ‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø‡¥Ø‡¥ø‡µΩ ‡¥ö‡µá‡µº‡¥§‡µç‡¥§‡µÅ! üì¶");
        }

        function updateBoxCount() {
            const btn = document.getElementById('boxBtn');
            if(btn) btn.innerText = `üõí ‡¥é‡¥®‡µç‡¥±‡µÜ ‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø ‡¥ï‡¥æ‡¥£‡µÅ‡¥ï (${myBox.length})`;
        }

        window.onload = updateBoxCount;
        // ‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø‡¥Ø‡¥ø‡¥≤‡µÅ‡¥≥‡µç‡¥≥ ‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª
function showBoxDetails() {
    const modal = document.getElementById('boxModal');
    const listDiv = document.getElementById('boxItemsList');
    
    if (myBox.length === 0) {
        listDiv.innerHTML = "<p style='text-align:center; color:#666;'>‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø ‡¥ï‡¥æ‡¥≤‡¥ø‡¥Ø‡¥æ‡¥£‡µç! ü•¶</p>";
    } else {
        // ‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥≤‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥§‡¥Ø‡µç‡¥Ø‡¥æ‡¥±‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ
        let listHTML = "<ul style='padding-left:20px; line-height:1.8;'>";
        myBox.forEach((item, index) => {
            listHTML += `<li>${item} <span onclick="removeFromBox(${index})" style="color:red; margin-left:10px; cursor:pointer; font-size:12px;">(‡¥í‡¥¥‡¥ø‡¥µ‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥ï)</span></li>`;
        });
        listHTML += "</ul>";
        listDiv.innerHTML = listHTML;
    }
    modal.style.display = 'block';
}

// ‡¥µ‡¥ø‡µª‡¥°‡µã ‡¥Ö‡¥ü‡¥Ø‡µç‡¥ï‡µç‡¥ï‡¥æ‡µª
function closeModal() {
    document.getElementById('boxModal').style.display = 'none';
}

// ‡¥∏‡¥æ‡¥ß‡¥®‡¥Ç ‡¥í‡¥¥‡¥ø‡¥µ‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡µª
function removeFromBox(index) {
    myBox.splice(index, 1);
    localStorage.setItem('myBox', JSON.stringify(myBox));
    updateBoxCount();
    showBoxDetails(); // ‡¥≤‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥™‡µÅ‡¥§‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ
}

// ‡¥µ‡¥æ‡¥ü‡µç‡¥∏‡µç‡¥Ü‡¥™‡µç‡¥™‡µç ‡¥ì‡µº‡¥°‡µº ‡¥Ö‡¥Ø‡¥ï‡µç‡¥ï‡¥æ‡µª
function orderViaWhatsApp() {
    if (myBox.length === 0) return alert("‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø‡¥Ø‡¥ø‡µΩ ‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥í‡¥®‡µç‡¥®‡µÅ‡¥Æ‡¥ø‡¥≤‡µç‡¥≤!");
    
    // ‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥ì‡¥∞‡µã‡¥®‡µç‡¥®‡¥æ‡¥Ø‡¥ø ‡¥Æ‡µÜ‡¥∏‡µç‡¥∏‡µá‡¥ú‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥Æ‡¥æ‡¥±‡µç‡¥±‡µÅ‡¥®‡µç‡¥®‡µÅ
    const itemsText = myBox.join('\n- ');
    const message = `‡¥π‡¥≤‡µã, ‡¥é‡¥®‡¥ø‡¥ï‡µç‡¥ï‡µç ‡¥§‡¥æ‡¥¥‡µÜ ‡¥™‡¥±‡¥Ø‡µÅ‡¥®‡µç‡¥® ‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥µ‡µá‡¥£‡¥Ç:\n\n- ${itemsText}\n\n‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥ì‡µº‡¥°‡µº ‡¥ï‡µ∫‡¥´‡µá‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥Æ‡¥≤‡µç‡¥≤‡µã.`;
    
    const phoneNumber = "918089475765"; // ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥®‡¥Æ‡µç‡¥™‡µº
    const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
    window.open(url, '_blank');
}

// ‡¥Æ‡¥æ‡¥≤‡¥ø‡¥®‡µç‡¥Ø‡¥§‡µç‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥Ö‡¥≥‡¥µ‡µç ‡¥ü‡µà‡¥™‡µç‡¥™‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥Æ‡µç‡¥™‡µã‡µæ ‡¥°‡¥ø‡¥∏‡µç‡¥ï‡µó‡¥£‡µç‡¥ü‡µç ‡¥ï‡¥£‡¥ï‡µç‡¥ï‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡µª
function calculateDiscount() {
    const amount = document.getElementById('wasteAmount').value;
    const discountRate = 5; // 1 ‡¥ï‡¥ø‡¥≤‡µã‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µç 5 ‡¥∞‡µÇ‡¥™
    const totalDiscount = amount * discountRate;
    
    // ‡¥∏‡µç‡¥ï‡µç‡¥∞‡µÄ‡¥®‡¥ø‡µΩ ‡¥°‡¥ø‡¥∏‡µç‡¥ï‡µó‡¥£‡µç‡¥ü‡µç ‡¥§‡µÅ‡¥ï ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ
    document.getElementById('discountDisplay').innerText = totalDiscount.toFixed(2);
}

// ‡¥°‡¥ø‡¥∏‡µç‡¥ï‡µó‡¥£‡µç‡¥ü‡µç ‡¥Ö‡¥™‡µç‡¥≤‡µà ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥Æ‡µç‡¥™‡µã‡µæ
function applyBarterDiscount() {
    const discount = document.getElementById('discountDisplay').innerText;
    if(discount > 0) {
        alert("‡¥Ö‡¥≠‡¥ø‡¥®‡¥®‡µç‡¥¶‡¥®‡¥ô‡µç‡¥ô‡µæ! ‚Çπ" + discount + " ‡¥°‡¥ø‡¥∏‡µç‡¥ï‡µó‡¥£‡µç‡¥ü‡µç ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥Ö‡¥ü‡µÅ‡¥§‡µç‡¥§ ‡¥ì‡µº‡¥°‡¥±‡¥ø‡µΩ ‡¥≤‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡¥§‡¥æ‡¥£‡µç. ‚ôªÔ∏è");
        
        // ‡¥ì‡µº‡¥°‡µº ‡¥Ö‡¥Ø‡¥ï‡µç‡¥ï‡µÅ‡¥Æ‡µç‡¥™‡µã‡µæ ‡¥à ‡¥µ‡¥ø‡¥µ‡¥∞‡¥Ç ‡¥ï‡µÇ‡¥ü‡¥ø ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥µ‡µá‡¥£‡µç‡¥ü‡¥ø ‡¥≤‡µã‡¥ï‡µç‡¥ï‡µΩ ‡¥∏‡µç‡¥±‡µç‡¥±‡µã‡¥±‡µá‡¥ú‡¥ø‡µΩ ‡¥∏‡µá‡¥µ‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡¥Ç
        localStorage.setItem('appliedDiscount', discount);
    } else {
        alert("‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥Æ‡¥æ‡¥≤‡¥ø‡¥®‡µç‡¥Ø‡¥§‡µç‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥Ö‡¥≥‡¥µ‡µç ‡¥∞‡µá‡¥ñ‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡µÅ‡¥ï.");
    }
}
</script>

<script>
    
    function orderViaWhatsApp() {
        if (myBox.length === 0) return alert("‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø‡¥Ø‡¥ø‡µΩ ‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥í‡¥®‡µç‡¥®‡µÅ‡¥Æ‡¥ø‡¥≤‡µç‡¥≤!");
        
        const itemsText = myBox.join('\n- ');
        const wasteQty = document.getElementById('wasteAmount').value || 0;
        const discountAmount = document.getElementById('discountDisplay').innerText;

        let message = `‡¥π‡¥≤‡µã, ‡¥é‡¥®‡¥ø‡¥ï‡µç‡¥ï‡µç ‡¥§‡¥æ‡¥¥‡µÜ ‡¥™‡¥±‡¥Ø‡µÅ‡¥®‡µç‡¥® ‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥µ‡µá‡¥£‡¥Ç:\n\n- ${itemsText}\n`;

        if (wasteQty > 0) {
            message += `\n‚ôªÔ∏è *‡¥¨‡¥æ‡µº‡¥ü‡µç‡¥ü‡µº ‡¥é‡¥ï‡µç‡¥∏‡µç‡¥ö‡µá‡¥û‡µç‡¥ö‡µç ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡µæ:*`;
            message += `\n‡¥Æ‡¥æ‡¥≤‡¥ø‡¥®‡µç‡¥Ø‡¥Ç: ${wasteQty} Kg`;
            message += `\n‡¥°‡¥ø‡¥∏‡µç‡¥ï‡µó‡¥£‡µç‡¥ü‡µç: ‚Çπ${discountAmount}`;
            message += `\n--------------------------`;
        }

        message += `\n‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥ì‡µº‡¥°‡µº ‡¥ï‡µ∫‡¥´‡µá‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥Æ‡¥≤‡µç‡¥≤‡µã.`;
        
        const phoneNumber = "918089475765";
        const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
        window.open(url, '_blank');
    }

    // ... ‡¥Æ‡¥±‡µç‡¥±‡µç ‡¥´‡¥ô‡µç‡¥ï‡µç‡¥∑‡¥®‡µÅ‡¥ï‡µæ ...
    
    
</script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
  // ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥´‡¥Ø‡µº‡¥¨‡µá‡¥∏‡µç ‡¥ï‡µã‡µ∫‡¥´‡¥ø‡¥ó‡¥±‡µá‡¥∑‡µª
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyArvf9DWqivdzRArdJyRDH0Wq0NOfvs1ik",
  authDomain: "farm-2-home-defe4.firebaseapp.com",
  databaseURL: "https://farm-2-home-defe4-default-rtdb.firebaseio.com",
  projectId: "farm-2-home-defe4",
  storageBucket: "farm-2-home-defe4.firebasestorage.app",
  messagingSenderId: "825061986053",
  appId: "1:825061986053:web:5c1fa9652dd89d5433716c",
  measurementId: "G-9FWC46TPPR"
};
  // Firebase Initialize ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ
  if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
  }
  const database = firebase.database();

  // ‡¥°‡¥æ‡¥±‡µç‡¥± ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡¥®‡µÅ‡¥≥‡µç‡¥≥ ‡¥´‡¥Ç‡¥ó‡µç‡¥∑‡µª
  function uploadData() {
    var name = document.getElementById('pName').value;
    var price = document.getElementById('pPrice').value;

    if(name == "" || price == "") {
        alert("‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥™‡µá‡¥∞‡µÅ‡¥Ç ‡¥µ‡¥ø‡¥≤‡¥Ø‡µÅ‡¥Ç ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï!");
        return;
    }

    database.ref('products/').push({
      productName: name,
      price: price
    }).then(() => {
      alert("‡¥∏‡¥æ‡¥ß‡¥®‡¥Ç ‡¥µ‡¥ø‡¥ú‡¥Ø‡¥ï‡¥∞‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥ö‡µá‡µº‡¥§‡µç‡¥§‡µÅ! ‚úÖ");
      document.getElementById('pName').value = "";
      document.getElementById('pPrice').value = "";
    });
  }

  // ‡¥Æ‡¥±‡µç‡¥±‡µä‡¥∞‡µÅ ‡¥´‡µã‡¥£‡¥ø‡¥≤‡µÅ‡¥Ç ‡¥°‡¥æ‡¥±‡µç‡¥± ‡¥ï‡¥æ‡¥£‡¥æ‡µª ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥® ‡¥≤‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç
  const itemContainer = document.getElementById('items-container');
  if(itemContainer) {
    database.ref('products/').on('value', (snapshot) => {
      itemContainer.innerHTML = ""; 
      snapshot.forEach((childSnapshot) => {
        var childData = childSnapshot.val();
        itemContainer.innerHTML += `
          <div class="product-card" style="border:1px solid #2e7d32; padding:10px; margin:10px; border-radius:10px; background:white;">
            <h4>${childData.productName}</h4>
            <p>‡¥µ‡¥ø‡¥≤: ‚Çπ${childData.price} / KG</p>
          </div>
        `;
      });
    });
  }
  // ‡¥´‡¥Ø‡µº‡¥¨‡µá‡¥∏‡¥ø‡µΩ ‡¥®‡¥ø‡¥®‡µç‡¥®‡µç ‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥µ‡¥≤‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª
database.ref('products/').on('value', (snapshot) => {
    const list = document.getElementById('customerProductList'); // Image 1000075629 ‡¥≤‡µÜ ID
    list.innerHTML = ""; 
    snapshot.forEach((childSnapshot) => {
        const data = childSnapshot.val();
        list.innerHTML += `
            <div class="product-item">
                <h4>${data.productName}</h4>
                <p>‚Çπ${data.price}</p>
                <button class="btn-main" onclick="addToBox('${data.productName}')">üì¶ ‡¥™‡µÜ‡¥ü‡µç‡¥ü‡¥ø‡¥Ø‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç</button>
            </div>`;
    });
});

  async function analyzePlant() {
    const fileInput = document.getElementById('plantImage');
    const resultDiv = document.getElementById('aiResult');
    const apiKey = "AIzaSyATlbJsyXmC0zO6jwxvGQS38lhKJ69sXBk"; // ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ API Key

    if (fileInput.files.length === 0) {
        alert("‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥í‡¥∞‡µÅ ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥∏‡µÜ‡¥≤‡¥ï‡µç‡¥ü‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÇ");
        return;
    }

    const file = fileInput.files[0];
    resultDiv.style.display = "block";
    resultDiv.innerHTML = "AI ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ... ‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥ï‡¥æ‡¥§‡µç‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÇ ‚è≥";

    const reader = new FileReader();
    reader.onloadend = async () => {
        const base64Data = reader.result.split(',')[1];
        
        const payload = {
            contents: [{
                parts: [
                    { text: "‡¥à ‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥§‡µç‡¥§‡¥ø‡¥≤‡µÅ‡¥≥‡µç‡¥≥ ‡¥ö‡µÜ‡¥ü‡¥ø‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥∞‡µã‡¥ó‡¥Ç ‡¥é‡¥®‡µç‡¥§‡¥æ‡¥£‡µÜ‡¥®‡µç‡¥®‡µÅ‡¥Ç ‡¥Ö‡¥§‡¥ø‡¥®‡µÅ‡¥≥‡µç‡¥≥ ‡¥™‡¥∞‡¥ø‡¥π‡¥æ‡¥∞‡¥µ‡µÅ‡¥Ç ‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥™‡¥±‡¥û‡µç‡¥û‡µÅ‡¥§‡¥∞‡µÅ‡¥ï." },
                    { inline_data: { mime_type: "image/jpeg", data: base64Data } }
                ]
            }]
        };

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            const data = await response.json();
            const text = data.candidates[0].content.parts[0].text;
            resultDiv.innerHTML = "<b>‡¥™‡¥∞‡¥ø‡¥π‡¥æ‡¥∞‡¥Ç:</b><br>" + text.replace(/\n/g, "<br>");
        } catch (error) {
            resultDiv.innerHTML = "‡¥ï‡µç‡¥∑‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡¥£‡¥Ç, ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥®‡¥Ø‡¥ø‡µΩ ‡¥™‡¥ø‡¥∂‡¥ï‡µç ‡¥∏‡¥Ç‡¥≠‡¥µ‡¥ø‡¥ö‡µç‡¥ö‡µÅ. ‡¥á‡¥®‡µç‡¥±‡µº‡¥®‡µÜ‡¥±‡µç‡¥±‡µç ‡¥â‡¥£‡µç‡¥ü‡µÜ‡¥®‡µç‡¥®‡µç ‡¥â‡¥±‡¥™‡µç‡¥™‡µÅ‡¥µ‡¥∞‡µÅ‡¥§‡µç‡¥§‡µÅ‡¥ï.";
            console.error(error);
        }
    };
    reader.readAsDataURL(file);
  
